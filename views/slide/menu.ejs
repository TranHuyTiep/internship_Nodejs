<div id="menu" >

    <div class="top-menu">
        <div id="serch" >
            <div class="container container-serch">
                <div class="row">
                    <a href="/">
                        <div class="col-xs-2 col-md-2 img-logo"  style=" margin-right: -11px;">
                            <div class="col-xs-3 col-md-6 img" >
                                <img class="img-circle img-responsive"  src="/images/logoShop.jpg" style="width: 60px">
                            </div>
                        </div>
                    </a>
                    <div class="col-xs-6 col-md-6 form-search">
                        <div class="input-group" id="adv-search">
                            <input type="text" class="form-control" placeholder="Tìm kiếm" />
                            <div class="input-group-btn">
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-primary">
                                        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-4">
                        <div class="col-xs-6 col-md-3 col-md-push-3 cart">
                            <i class="fa fa-shopping-cart" aria-hidden="true" data-toggle="modal" data-target="#modal-cart"></i>
                        </div>
                        <div class="col-xs-6 col-md-6 col-md-push-3 user text-right">
                            <ul class="list-inline title-user-dnhap">
                                <i class="fa fa-sign-in"></i>
                                <li class="dang-nhap" data-toggle="modal" data-target="#modal-dang-nhap"><a type="button" >Đăng Nhập</a></li>
                            </ul>

                            <ul class="list-inline user-infor" hidden>
                                <li>
                                    <img class="img-circle dropdown-toggle img-responsive" data-toggle="dropdown" src="/images/user.png" style="width: 30px">
                                    <ul class="dropdown-menu text-left">
                                        <li><a href="/user/profile/order">Đơn Hàng</a></li>
                                        <li><a href="/user/profile/infor">Thông tin cá nhân</a></li>
                                        <li><a href="/user/sign-out">Logn Out</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid" style="padding: 0px">
                <div class="row menu-detail center-block text-center">
                    <ul class="list-inline">
                        <li>Quần Áo</li>
                        <li>Điện Thoại</li>
                        <li>Giầy Dép</li>
                        <li>Tú Sách</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modal-dang-nhap" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content modal-dang-nhap" >
                <div class="modal-header">
                    <div class="col-lg-10">
                        <h4 class="modal-title" style="cursor: pointer">Đăng Nhập</h4>
                    </div>
                    <h4 class="modal-title">
                        <a type="button"  class="click-dang-ky">Đăng Ký</a>
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <div class="row">
                            <form id="form-dang-nhap">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="Email">Email</label>
                                        <input type="text" name="email" class="form-control" id="email-dang-nhap" placeholder="example@gmail.com">
                                    </div>
                                    <div class="form-group">
                                        <label for="Password">Password</label>
                                        <input type="password" name="password" class="form-control" id="password-dang-nhap" placeholder="password">
                                    </div>
                                    <div class="form-group">
                                        <i class="alert-danger" hidden>Sai mật khẩu hoặc email</i>
                                    </div>
                                    <div class="form-group text-left quen-mk" style="padding-right: 0px">
                                        <a class="text-right click-quen-mk" style="cursor: pointer; text-decoration: none">Quên mật khẩu ?</a>
                                    </div>
                                </div>
                            </form>
                        </div>

                    </div>
                </div>
                <div class="modal-footer" style="margin-top: 0px">
                    <div class="form-group">
                        <div class="col-lg-6" style=";padding-left: 0px">
                            <button type="button" class="btn btn-primary submit-dang-nhap" style="width: 100%">Đăng nhập</button>
                        </div>
                        <div class="col-lg-6" style=" padding-right: 0px">
                            <a href="/user/sign-in/facebook">
                                <button type="button" class="btn btn-primary btn-dang-nhap-facebook" style="width: 100%;">
                                    <i class="fa fa-facebook-f"></i>
                                </button>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content modal-quen-mk" hidden>
                <div class="modal-header">
                    <div class="col-lg-10">
                        <h4 class="modal-title " style=" cursor: pointer">Quên mật khẩu</h4>
                    </div>
                    <h4 class="modal-title">
                        <a type="button" class="click-dang-nhap">Đăng Nhập</a>
                    </h4>
                </div>
                <form id="form-quen-mk">
                    <div class="modal-body">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="email-quen-mk">Email</label>
                                        <input type="text" name="email" class="form-control" id="email-quen-mk" placeholder="example@gmail.com">
                                    </div>
                                    <div class="form-group">
                                        <i class="alert-info" >Nhập email của bạn để lấy lại mật khẩu.</i>
                                        <i class="alert-danger" hidden></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="col-sm-8">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                        <div class="col-sm-4">
                            <button type="button" class="btn btn-primary submit-quen-mk">Lấy lại mật khẩu</button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-content modal-dang-ky" hidden>
                <div class="modal-header">
                    <div class="col-lg-10">
                        <h4 class="modal-title" style=" cursor: pointer">Đăng Ký</h4>
                    </div>
                    <h4 class="modal-title">
                        <a type="button" class="click-dang-nhap">Đăng Nhập</a>
                    </h4>
                </div>
                <form id="form-dang-ky">
                    <div class="modal-body">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="Email-dky">Email</label>
                                        <input type="text" name="email" class="form-control" id="email-dky" placeholder="example@gmail.com">
                                    </div>

                                    <div class="form-group">
                                        <label for="Username-kdy">Username</label>
                                        <input type="text" name="username" class="form-control" id="username-dky" placeholder="Tên đăng nhập">
                                    </div>

                                    <div class="form-group">
                                        <label for="password-dky">Password</label>
                                        <input type="password" name="newPassword" class="form-control" id="new-pasword-dky" placeholder="Nhập password">
                                    </div>
                                    <div class="form-group">
                                        <label for="password-dky">Nhập Lại Password</label>
                                        <input type="password" name="password" class="form-control" id="password-dky" placeholder="Nhập lại password">
                                    </div>
                                    <div class="form-group">
                                        <i class="alert-info" hidden>Đăng ký thành công. Vui lòng kiểm tra email để kích hoạt tài khoản.</i>
                                        <i class="alert-danger" hidden></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="col-sm-10">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-primary submit-dang-ky">Đăng Ký</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modal-cart" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">
                        <a >Shop Cart</a>
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="container-fluid text-center">
                        <div class="row">
                            <div class="col-sm-3">Tên Sản Phẩm</div>
                            <div class="col-sm-3">Loại Sản phẩm</div>
                            <div class="col-sm-3">Số Lượng</div>
                            <div class="col-sm-3">Thành Tiền</div>
                        </div>
                        <hr>
                        <div class="content-shop-cart">
                            <div class="row">
                                <div class="col-sm-3 ">
                                    <img src="/images/item_1.jpg" class="img-responsive center-block">
                                    <span>Mmadas</span>
                                </div>
                                <div class="col-sm-3">
                                    <select name="cars">
                                        <option value="volvo">S</option>
                                        <option value="saab">M</option>
                                        <option value="mercedes">L</option>
                                        <option value="audi">XL</option>
                                    </select>
                                </div>
                                <div class="col-sm-3">3</div>
                                <div class="col-sm-3">33333</div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3 ">
                                    <img src="/images/item_1.jpg " class="img-responsive center-block">
                                    <span>Mmadas</span>
                                </div>
                                <div class="col-sm-3">
                                    <select name="cars">
                                        <option value="volvo">S</option>
                                        <option value="saab">M</option>
                                        <option value="mercedes">L</option>
                                        <option value="audi">XL</option>
                                    </select>
                                </div>
                                <div class="col-sm-3">3</div>
                                <div class="col-sm-3">33333</div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3  ">
                                    <img src="/images/item_1.jpg" class="img-responsive center-block">
                                    <span>Mmadas</span>
                                </div>
                                <div class="col-sm-3">
                                    <select name="cars">
                                        <option value="volvo">S</option>
                                        <option value="saab">M</option>
                                        <option value="mercedes">L</option>
                                        <option value="audi">XL</option>
                                    </select>
                                </div>
                                <div class="col-sm-3">3</div>
                                <div class="col-sm-3">33333</div>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-lg-9" style="text-align: left">
                                <h4 > Tổng tiền</h4>
                            </div>
                            <div class="col-lg-3" >
                                <h4 style="color: red">
                                    123.346.789 đ
                                </h4>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="col-sm-10">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                    <div class="col-sm-2">
                        <button type="submit" class="btn btn-primary">Đăng Ký</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/javascripts/form-validation.js"></script>
<script>
    $(document).ready(function () {
        var user = <%- JSON.stringify(user) || false%>;
        if(user){
            $('.user-infor').removeAttr("hidden");
            $('.title-user-dnhap').attr("hidden","true");
        }else {
            $('.user-infor').attr("hidden","true");
            $('.title-user-dnhap').removeAttr("hidden");
        }

        $('.click-dang-ky').click(function () {
           $('.modal-dang-nhap').attr("hidden","true");
            $('.modal-quen-mk').attr("hidden","true");
           $('.modal-dang-ky').removeAttr("hidden")
        });
        $('.click-dang-nhap').click(function () {
            $('.modal-dang-nhap').removeAttr("hidden");
            $('.modal-dang-ky').attr("hidden","true");
            $('.modal-quen-mk').attr("hidden","true");
        });

        $('.click-quen-mk').click(function () {
            $('.modal-dang-nhap').attr("hidden","true");
            $('.modal-dang-ky').attr("hidden","true");
            $('.modal-quen-mk').removeAttr("hidden")
        });

        $('#modal-dang-nhap').on('hidden.bs.modal', function () {
            $("#form-dang-ky").trigger('reset');
            $("#form-dang-nhap").trigger('reset');
            $("#form-quen-mk").trigger('reset');
        })

        $('.submit-dang-ky').click(function () {
            $.ajax({
                url : "/user/sign-up",
                type : "post",
                dataType:"json",
                data : {
                    email: $('#email-dky').val(),
                    username: $('#username-dky').val(),
                    newPassword: $('#new-pasword-dky').val(),
                    password: $('#password-dky').val(),

                },
                success : function (result){
                    if(result.err == false){
                        $('#form-dang-ky .alert-info').removeAttr("hidden");
                        $('#form-dang-ky .alert-danger').attr("hidden","true");
                        $("#form-dang-ky").trigger('reset');
                    }else {
                        $('#form-dang-ky .alert-info').attr("hidden","true");
                        $('#form-dang-ky .alert-danger').removeAttr("hidden").text('Kiểm tra lại thông tin hoặc email đã tồn tại');
                    }
                    $("#form-quen-mk").trigger('reset');
                }
            });
        });

        $('.submit-dang-nhap').click(function () {
            $.ajax({
                url : "/user/sign-in",
                type : "post",
                dataType:"json",
                data : {
                    email: $('#email-dang-nhap').val(),
                    password: $('#password-dang-nhap').val(),

                },
                success : function (result){
                    if(result.err == false){
                        $('.user-infor').removeAttr("hidden");
                        $('.title-user-dnhap').attr("hidden","true");
                        $('#form-dang-nhap .alert-info').attr("hidden","true");
                        $('#form-dang-nhap .alert-danger').attr("hidden","true");
                        $('#modal-dang-nhap').modal('hide');
                    }else {
                        $('#form-dang-nhap .alert-info').attr("hidden","true");
                        $('#form-dang-nhap .alert-danger').removeAttr("hidden").text('Kiểm tra lại thông tin hoặc tài khoản không tồn tại');
                    }
                }
            });
        })

        $('.submit-quen-mk').click(function () {
            $.ajax({
                url : "/user/reset-password",
                type : "post",
                dataType:"json",
                data : {
                    email: $('#email-quen-mk').val(),
                },
                success : function (result){
                    if(result.err == false){
                        $('#form-quen-mk .alert-info').text("Vui lòng check email!");
                    }else {
                        $('#form-quen-mk .alert-info').attr("hidden","true");
                        $('#form-quen-mk .alert-danger').removeAttr("hidden").text('Email không tồn tại');
                    }
                }
            });
        })

    })
</script>